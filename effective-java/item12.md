# 아이템 12. toString을 항상 재정의하라
Object의 기본 toString 메서드는 PhoneNumber@adbbd처럼 단순히 `클래스_이름@16진수로_표현한_해시코드`형태로 반환한다.
toString의 일반 규약에 따르면 '간결하면서 사람이 읽기 쉬운 형태의 유익한 정보'를 반환해야 한다.</br>
Object의 기본 반환형태는 707-867-5309처럼 전화번호를 직접 알려주는 형태가 사람이 읽기 더 적합하다.
또한 toString의 규약은 "모든 하위 클래스에서 이 메서드를 재정의하라"고 명시되어 있다.

equals와 hashCode([아이템 10](item10.md), [아이템 11](item11.md))만큼 중요하진 않지만 toString을 잘 구현한 클래스가 사용하고 디버깅하기 수월하다.
toString 메서드는 객체를 println, printf, 문자열 연결 연산자(+), assert 구문에 넘길 때, 혹은 디버거가 객체를 출력할 때 자동으로 호출된다.
객체를 참조하는 컴포넌트가 에러 메시지를 로깅할 때도 자동으로 호출할 수 있어 재정의를 잘 해두면 편리하다.

toString은 그 객체가 가진 주요 정보 모두를 반환하는게 좋다. 
하지만 객체가 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 무리가 있으므로 이런 상황에는 요약 정보만을 담는다.

toString을 구현할 때면 반환값의 포맷을 문서화할지 정해야 한다.
이는 아주 중요하며 전화번호나 행렬 같은 값 클래스라면 문서화하는것이 좋다.
포맷을 명시하면 그 객체는 표준적이고, 명확하고, 사람이 읽을 수 있게 된다.
따라서 그 값 그대로 출력에 사용하거나 CSV 파일처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수도 있다.
포맷을 명시하기로 했다면 포맷에 맞는 문자열과 객체를 상호 전환할 수 있는 static 팩터리 메서드나 생성자를 함께 제공해주면 좋다.
BigInteger나 BigDecimal같은 자바의 값 클래스가 이러한 방법을 사용하고 있다.

포맷을 명시했을 때 단점도 존재한다. 한번 명시하면 평생 그 포맷에 얽매이게 된다.
이를 사용하는 프로그래머들이 포맷에 맞춰 파싱하고, 객체를 만들고, 영속 데이터로 저장하는 코드를 작성한 후에 포맷이 변경된다면 이를 사용하는 코드들과 데이터가 망가지게 된다.
반대로 포맷을 명시하지 않는다면 향후 릴리스에서 정보를 더 넣거나 포맷을 개선할 수 있는 유연성을 얻게 된다.

포맷을 명시하든 아니든 의도는 명확히 밝혀야 한다.
포맷을 명시하려면 정확하게 해야 한다.
[아이템 11](item11.md)에서 다룬 PhoneNumber 클래스용 toString을 예로 들면
```java
/**
 * 이 전화번호의 문자열 표현을 반환한다.
 * 이 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성된다.
 * XXX는 지역 코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
 * 각각의 대문자는 10진수 숫자 하나를 나타낸다.
 * 
 * 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,
 * 앞에서부터 0으로 채워나간다. 예컨데 가입자 번호가 123이라면
 * 전화번호의 마지막 네 문자는 "0123"이 된다.
 */
@Override public String toString() {
    return String.format("%03d-%03d-%04d",
            areaCode, prefix, lineNum);
}
```
포맷을 명시하지 않기로 했다면 다음처럼 작성할 수 있다.
```java
/**
 * 이 약물에 관한 대략적인 설명을 반환한다.
 * 다음은 이 설명의 일반적인 형태이다,
 * 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
 * 
 * "[약물 #9: 유형=사랑, 냄새=테레빈유, 겉모습=먹물]"
 */
@Override public String toString() { ... }
```

포맷 명시 여부와 상관없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자.
PhoneNumber 클래스를 예로 들면 지역코드, 프리픽스, 가입자 번호용 접근자를 제공해야 한다.</br>
그렇지 않으면 이 정보가 필요한 프로그래머는 toString의 반환값을 파싱할 수밖에 없다.
성능이 나빠지고 필요하지도 않은 작업이고, 향후 포맷 변경 시 시스템이 망가질 수 있다.
접근자를 제공하지 않으면 변경될 수 있다고 문서화했더라도 그 포맷이 사실상 준-표준 API나 다름없어진다.

static 유틸리티 클래스[아이템 4](item4.md)는 toString을 제공할 이유가 없다.
또한 대부분의 열거 타입([아이템 34](item34.md))도 자바가 이미 완벽한 toString을 제공하고 있어 재정의가 필요 없다.</br>
하위 클래스들이 공유해야 할 문자열 표현이 있는 추상 클래스라면 toString을 재정의해줘야 한다.
대다수의 Collection 구현체들은 추상 Collection 클래스들의 toString을 상속해서 사용한다.

[아이템 10](item10.md)에서 소개한 AutoValue나 많은 IDE도 toString을 생성해준다.
하지만 목적에 맞는 완벽한 toString은 아니니 필요하다면 직접 재정의해서 사용하도록 하자.
